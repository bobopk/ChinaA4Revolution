import{d as m,s as b,a as L,b as $,T as k,c,e as u,f as d,w as M,g as S,p as I,h as w,r as l,o as a,i as h,F as O,j as N,k as T,l as C,m as z}from"./vendor.ac6e31ee.js";const P=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}};P();var f=(t,n)=>{const o=t.__vccOpts||t;for(const[s,e]of n)o[s]=e;return o};const q=m({name:"TimeMap",components:{LMap:b,"l-tile-layer":L,LMarker:$},props:{docId:String},data(){return{timeline:{},timelineLoaded:!1,zoom:10,center:[],docURL:"https://raw.githubusercontent.com/aivuk/TimeMapper2/master/docs/battles.csv",positions:{},baseLayer:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}}},mounted(){this.timeline=new k("timeline",this.docURL,{sheets_proxy:""}),this.timeline.on("loaded",()=>{this.timelineLoaded=!0;let t=this.timeline._storyslider.data.events.length,n="";for(let o=0;o<t;++o){let s=[],e=this.timeline.getData(o);"lat"in e&&"lon"in e?s=[e.lat,e.lon]:"Location_Original"in e?s=e.Location_Original.split(",").map(Number):"Location"in e&&(s=e.Location.split(",").map(Number)),o==0&&(n=this.timeline.getSlide(o).data.unique_id),this.positions[this.timeline.getSlide(o).data.unique_id]=s}this.center=this.positions[n]}),this.timeline.on("change",t=>{this.changeMapPoint(t)})},methods:{changeMapPoint(t){console.log(this.$refs.map),this.$refs.map&&this.$refs.map.leafletObject.flyTo(this.positions[t.unique_id])},changeSlide(t){this.timeline.goToId(t)}}}),A=t=>(I("data-v-48163493"),t=t(),w(),t),B={class:"hello"},D=A(()=>u("div",{id:"timeline"},null,-1)),E={id:"mapDiv"};function R(t,n,o,s,e,i){const r=l("l-tile-layer"),g=l("l-marker"),y=l("l-map");return a(),c("div",B,[D,u("div",E,[t.timelineLoaded?(a(),d(y,{key:0,ref:"map",style:{height:"100%",width:"100%"},zoom:t.zoom,center:t.center},{default:M(()=>[h(r,{url:t.baseLayer.url,attribution:t.baseLayer.attribution},null,8,["url","attribution"]),(a(!0),c(O,null,N(t.positions,(v,p)=>(a(),d(g,{key:p,"lat-lng":v,onClick:K=>t.changeSlide(p)},null,8,["lat-lng","onClick"]))),128))]),_:1},8,["zoom","center"])):S("",!0)])])}var _=f(q,[["render",R],["__scopeId","data-v-48163493"]]);const j=m({name:"home",props:["docId"],components:{TimeMap:_},mounted(){console.log("HERE",this.docId,this.$route.params)}}),F={class:"home"};function H(t,n,o,s,e,i){const r=l("router-view");return a(),c("div",F,[h(r)])}var V=f(j,[["render",H]]);const U=[{path:"/",name:"Home",component:_,props:!0}],x=T({history:C("/"),routes:U});z(V).use(x).mount("#app");
